!function(r){var a=Array.prototype.slice,c=0,o=1,s=2,l=r.Class({events:["complete"],properties:{promise:null},methods:{init:function(t,e){this._promise=new u,t&&this.resolve(t),e&&this.reject(e)},resolve:function(){var e=a.call(arguments);try{var t=this.get("promise"),n=this;if(t.get("readyState")!=c)return;t.set("readyState",o),t.set("data",e),r.each(t.get("resolves"),function(t){t.apply(n,e)})}catch(t){h.catch(t,this)}this.fire("complete",e)},reject:function(){var t=a.call(arguments);try{var e=this.get("promise");if(e.get("readyState")!=c)return;e.set("readyState",s),e.set("reason",t);var n=e.get("rejects")[0];n&&n.apply(this,t)}catch(t){h.catch(t,this)}this.fire("complete",t)}}}),u=r.Class({statics:{isPromise:function(t){return null!=t&&"function"==typeof t.then},defer:null},properties:{resolves:null,rejects:null,data:null,reason:null,readyState:null},methods:{init:function(t){this.set("resolves",[]),this.set("rejects",[]),this.set("exceptions",[]),this.set("readyState",c)},then:function(n,t){var s=new l;function e(){var t=a.call(arguments),e=n?n.apply(this,t):t;return u.isPromise(e)?e.then(function(){s.resolve.apply(s,a.call(arguments))}):s.resolve.apply(s,e),e}if(this.get("readyState")===c)this.get("resolves").push(e),t?this.get("rejects").push(t):this.get("rejects").push(function(){s.reject.apply(s,a.call(arguments))});else if(this.get("readyState")===o){var i=this;setTimeout(function(){e.apply(i,i.get("data"))})}return s.promise},catch:function(t){return h.exception(t)},finally:function(t){return h.finally(t)},otherwise:function(t){return this.then(void 0,t)}}}),h=r.async=r.Class({static:!0,methods:{init:function(t){this._exceptions=[],this._finallys=[],this._count=0,this._currIndex=0,this._dataArray=[]},exception:function(t){return this._exceptions.push(t),this},catch:function(e,n){return r.each(this._exceptions,function(t){t.call(n,e)}),this},finally:function(t){return this._finallys.push(t),this},defer:function(t,e){var n=this,s=new l(t,e);return s.on("complete",function(t,e){n._currIndex++,n._dataArray.push(e),n._currIndex==n._count&&(r.each(n._finallys,function(t){try{t(n._dataArray)}catch(t){r.error(t.message)}}),n._finallys=[])}),n._count++,s},all:function(e){var n=h.defer(),s=0,i=[];return r.each(e,function(t){t.then(function(t){i.push(t),++s>=e.length&&n.resolve(i)})}),n.promise},any:function(t){var e=h.defer();return r.each(t,function(t){t.then(function(t){e.resolve(t)})}),e.promise}}})}(zn);
!function(t){var e=[97,123],n=[65,91];t.char=t.Class({static:!0,methods:{getRandomChar:function(){return this.getUppercaseLetters()[Math.floor(26*Math.random())]},lowercase:function(r){return t.is(r,"string")?r.replace(/[A-Z]/g,function(r){return String.fromCharCode(32|r.charCodeAt(0))}):r},uppercase:function(r){return t.is(r,"string")?r.replace(/[a-z]/g,function(r){return String.fromCharCode(-33&r.charCodeAt(0))}):r},toUnicode:function(r){for(var t=[],e=0,n=r.length;e<n;e++)t.push(r.charCodeAt(e));return t},toChar:function(r,t){for(var e=[],n=r;n<t;n++)e.push(String.fromCharCode(n));return e},getLowercaseLetters:function(){var r=e;return this.toChar(r[0],r[1])},getUppercaseLetters:function(){var r=n;return this.toChar(r[0],r[1])},getStringFromChar:function(r,t){for(var e=r||"A",n=t||26,o=[],a=0;a<n;a++)o.push(String.fromCharCode(e.charCodeAt(0)+a));return o.join("")}}})}(zn);
!function(t){t.data=t.Class({static:!0,methods:{}})}(zn);
!function(e){var c="yyyy-MM-dd hh:mm:ss.SSS";e.date=e.Class({static:!0,methods:{format:function(){},nowDateString:function(e){var t=new Date,r=t.getFullYear(),n=t.getMonth()+1,s=t.getDate();return[r,n=n<10?"0"+n:n,s=s<10?"0"+s:s].join(e||"")},nowTimeString:function(e){var t=new Date,r=t.getHours(),n=t.getMinutes(),s=t.getSeconds();return[r=r<10?"0"+r:r,n=n<10?"0"+n:n,s=s<10?"0"+s:s].join(e||":")},getSecond:function(e){var t=1*e.substring(1,e.length);switch(e.substring(0,1)){case"s":return 1e3*t;case"h":return 60*t*60*1e3;case"d":return 24*t*60*60*1e3}},asString:function(e){var t=c;"string"==typeof e&&(t=e,e=arguments[1]);var r=this.__addZero(e.getDate()),n=this.__addZero(e.getMonth()+1),s=this.__addZero(e.getFullYear()),a=this.__addZero(e.getFullYear().toString().substring(2,4)),i=-1<t.indexOf("yyyy")?s:a,o=this.__addZero(e.getHours()),g=this.__addZero(e.getMinutes()),d=this.__addZero(e.getSeconds()),h=this.__padWithZeros(e.getMilliseconds(),3),u=this.__offset(e);return t.replace(/dd/g,r).replace(/MM/g,n).replace(/y{1,4}/g,i).replace(/hh/g,o).replace(/mm/g,g).replace(/ss/g,d).replace(/SSS/g,h).replace(/O/g,u)},__padWithZeros:function(e,t){for(var r=e+"";r.length<t;)r="0"+r;return r},__addZero:function(e){return this.__padWithZeros(e,2)},__offset:function(e){var t=Math.abs(e.getTimezoneOffset()),r=String(Math.floor(t/60)),n=String(t%60);return 1==r.length&&(r="0"+r),1==n.length&&(n="0"+n),e.getTimezoneOffset()<0?"+"+r+n:"-"+r+n}}})}(zn);
!function(f){f.json=f.Class({static:!0,methods:{serialize:function(n){return Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&")},format:function(e,n,t){if(!n)return n;for(var c=null,r=null,a=escape(n),i=f.extend({prefix:"${",suffix:"}"},t),o=escape(i.prefix)+"([^%>]+)?"+escape(i.suffix),s=new RegExp(o,"i");c=s.exec(a);){switch(r=f.path(e,c[1].trim()),f.type(r)){case"array":r=r.join("");break;case"object":r=JSON.stringify(r);break;case"function":r=r.call(null,e,n,t)}a=a.replace(s,r)}return unescape(a)}}})}(zn);
!function(n){var s=["INFO","DEBUG","WARN","ERROR","TRACE","ALL"],g=["#100000","#2125a0","#a82c2c","#c045b7","1cb131","#100000"],r=[38,34,35,31,32,36,33],t=0,o=1,e=2,i=3,l=4,c=6,a=n.Class({events:["info","debug","warn","error","trace","all"],methods:{init:function(){this._config={only:null,levels:["info","debug","warn","error","trace","all"]}},config:function(t){this._config=n.overwrite(t,this._config)},info:function(){this.__log.call(this,t,arguments)},debug:function(){this.__log.call(this,o,arguments)},warn:function(){this.__log.call(this,e,arguments)},trace:function(){this.__log.call(this,l,arguments)},error:function(t){this.__log.call(this,i,arguments)},all:function(t){this.__log.call(this,c,arguments)},__getDateString:function(t){return n.date.asString(t||new Date)},__getPosition:function(){try{throw new Error}catch(t){return n.DEBUG&&n.CONSOLE_ERROR&&console.log(t.stack),t.stack.split("\n")[5].replace(/\(/g,"").replace(/\)/g,"").split("/").pop()}},__formatLog4Server:function(t,n){var o="",e="",i="";return n&&(e="[",i="[0m",o=r[5]+"m",n=r[t.type]+"m"),[t.time," [",e,n,s[t.type],i,"] [",e,o,t.pos,i,"] ",t.message].join("")},__formatLog4Client:function(t,n){return["%c"+t.time," [",s[t.type],"] "].join("")},__log:function(t,n){var o=Array.prototype.slice.call(n),e=o.slice(0),i=s[t].toLowerCase(),r=this.__getDateString(),l=this.__getPosition();e.unshift(l),e.unshift(i),e.unshift(r),"undefined"!=typeof module&&module.exports?o.unshift(this.__formatLog4Server({type:t,time:r,pos:l},!0)):(o.unshift("color:"+g[t]),o.unshift(this.__formatLog4Client({type:t,time:r,pos:l},!0))),!this.__isOk(i)||!1!==this.fire(i,e,o)&&console.log.apply(this,o)},__isOk:function(t){if(this._config.only){if(this._config.only===t)return!0}else if(-1!==this._config.levels.indexOf(t))return!0;return!1}}});n.logger=new a;var f={info:function(){n.logger.info.apply(n.logger,arguments)},debug:function(){n.logger.debug.apply(n.logger,arguments)},warn:function(){n.logger.warn.apply(n.logger,arguments)},trace:function(){n.logger.trace.apply(n.logger,arguments)},error:function(){n.logger.error.apply(n.logger,arguments)}};n.extend(n,f)}(zn);
!function(l){l.querystring=l.Class({static:!0,properties:{config:{get:function(){return this._config}}},methods:{init:function(){this._config={separator:"&",equal:"=",minIndex:0,maxIndex:1e3}},config:function(e){return this.overwrite(this._config,e),this},parse:function(e,n){if("object"==typeof e)return e;if(""===e||!1===e||null==e)return{};var r=l.extend({},this._config,n),t={},i=r.equal,o=e.split(r.separator),s=o.length;0<r.maxIndex&&s>r.maxIndex&&(s=r.maxIndex);for(var a=r.minIndex;a<s;a++){var u=o[a].replace(/\+/g,"%20"),c=u.indexOf(i),f=null,g=null;g=0<=c?(f=u.substr(0,c),u.substr(c+1)):(f=u,""),""!==f&&(f=decodeURIComponent(f),g=decodeURIComponent(g),t.hasOwnProperty(f)?l.is(t[f],"array")?t[f].push(g):t[f]=[t[f],g]:t[f]=g)}return t},stringify:function(e,n){if("string"==typeof e)return e;var r=l.extend({},this._config,n),t=[],i=r.equal,o={};if(o=l.isZNObject(e)?e.gets():e,!l.is(o,"object"))throw new Error("Agrument Error.");for(var s in e){var a=e[s],u=encodeURIComponent(this.__stringifyValue(s));a=encodeURIComponent(this.__stringifyValue(a)),t.push(u+i+a)}return t.join(r.separator)},__stringifyValue:function(e){switch(l.type(e)){case"string":return e;case"boolean":return e?"true":"false";case"object":case"array":return JSON.stringify(e);case"number":return isFinite(e)?e:"0";case"function":return e();default:return""}}}})}(zn);
!function(t){var s=Array.prototype.slice,i=0,n=3,r=t.Class({events:["init","finished"],properties:{status:{value:i,get:function(){return this._status}}},methods:{init:function(t){},doTask:function(t,s){if(t){var i=s||[];i.unshift(this),t.handler.apply(t.context,i)}},done:function(){this._status=n,this._data=s.call(arguments),this.fire("finished",this._data),this.off("finished")}}}),e=t.Class({events:["clear","insert","pause","resume","exception","every","finally"],properties:{count:{get:function(){return this._tasks.length}}},methods:{init:function(t){this._exceptions=[],this._finallys=[],this._everys=[],this._tasks=[],this._taskProcessor=[],this._lastTask=null,this._data=[],this._max=(t||{}).max||1},destroy:function(){this._everys=[],this._tasks=[],this._taskProcessor=[],this.fire("finally",this._data,{method:"apply"}),this.super()},clear:function(){this._tasks=[]},pause:function(t){return this._paused=!0,0<t&&(this._pauseTimer=setTimeout(function(){this.resume()}.bind(this),t)),this.fire("pause"),this},resume:function(){return this._pauseTimer&&clearTimeout(this._pauseTimer),this._paused=!1,this.fire("resume"),this.doTask(),this},exception:function(t,s){return this.on("exception",t,s||this),this},catch:function(t){return this.fire("exception",t),this},finally:function(t,s){return this.on("finally",t,s||this),this},every:function(t,s){return this.on("every",t,s||this),this},unshift:function(t,s){return this.insert(t,s,0),this},push:function(t,s){return this.insert(t,s,-1),this},inserts:function(t,s,i){var e=t||[],n=i||0,r=this._tasks[0],h=null,a=null;return e=e.map(function(t){return a={handler:t,context:s||this},h&&((a.previous=h).next=a),h=a}.bind(this)),r&&((h.next=r).previous=h),e.unshift(0),e.unshift(n),this._tasks.splice.apply(this._tasks,e),this},insert:function(t,s,i){var e={handler:t,context:s||this},n=i||-1;switch(n){case-1:this._lastTask&&(e.previous=e,this._lastTask.next=e),this._lastTask=e,this._tasks.push(e);break;case 0:var r=this._tasks[0];r&&((e.next=r).previous=e),this._tasks.unshift(e);break;default:this._tasks.splice(n,0,e)}return this.fire("insert",e),this},getTaskProcessor:function(){for(var t=null,s=this._taskProcessor.length,i=0;i<s;i++)if((t=this._taskProcessor[i]).status==n)return t;if(!t&&this._max>s){var e=new r;return e.queue=this,e.on("finished",this.__onProcessorFinished.bind(this),this),e}},start:function(){return this._data=[],this.doTask()},doTask:function(t){var s=this._tasks.shift();if(s){var i=this.getTaskProcessor();i&&(s.previousResult=t,i.doTask(s,t))}else this.destroy();return this},__onProcessorFinished:function(t,s){this._data.push(s),this.fire("every",s,{method:"apply"}),this.doTask(s)}}});t.queue=function(t){return new e(t)}}(zn);
!function(e){e.string=e.Class({static:!0,methods:{decode:function(e){return e&&e.length&&(e=(e=(e=(e=(e=(e=(e=e.replace(/&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&nbsp;/g," ")).replace(/&#39;/g,"'")).replace(/&quot;/g,'"')).replace(/<br>/g,"\n")),e},encode:function(e){return e&&e.length&&(e=(e=(e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/ /g,"&nbsp;")).replace(/\'/g,"&#39;")).replace(/\"/g,"&quot;")),e}}})}(zn);
!function(t){t.util=t.Class({static:!0,methods:{formatDate:function(t,n){},wordCount:function(t){var n=data.match(/[a-zA-Z0-9_\u0392-\u03c9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/),r=0;if(null===n)return r;for(var e=0;e<n.length;e++)19968<=n[e].charCodeAt(0)?r+=n[e].length:r+=1;return r},rate:function(t){return"★★★★★☆☆☆☆☆".slice(5-t,10-t)},valueExchange:function(t,n){return t^=n,[t^=n^=t,n]},htmlspecialchars:function(t){return t.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},getColorValue:function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).slice(-6)},humpToSeparator:function(t,n){return t.match(/^[a-z][a-z0-9]+|[A-Z][a-z0-9]*/g).join(n||"_").toLowerCase()},getTime:function(){return(new Date).getTime()},generateCode:function(){return this.getTime().toString().substring(1).toString()+Math.floor(100*(9*Math.random()+1))},getRandomNumber:function(){return Math.floor(10*Math.random())},getRandomNumbers:function(){return Math.floor(1e3*(9*Math.random()+1))},getRandomChars:function(){return(Math.random()/+new Date).toString(36).replace(/\d/g,"").slice(1)},randomNumbers:function(t){return Math.random().toString().slice(-(t||6))}}})}(zn);