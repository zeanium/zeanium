(_=>{var a=Object.prototype.toString,o={timeout:function(e){return new Promise(function(t){setTimeout(t,e)})},truncate:function(t,e){return t.length<=e?"["+t+" ".repeat(e-t.length)+"]":"["+t.substring(0,(e=e/2)-3)+"..."+t.substring(t.length-e)+"]"},formatFieldData:function(t,e,n,r){var i,o=null,a={},c=r||{},s=e||[],u=n||[];for(i in t)if((!s.length||-1!==s.indexOf(i))&&-1==u.indexOf(i)){switch(o=t[i],_.type(o)){case"object":case"array":o=JSON.stringify(o);break;case"function":o=o(i,t)}if(_.is(o,"string")&&(o=(o=o.replace(/'/g,"")).replace(/\n/g,"")),c[i])switch(_.type(c[i])){case"string":switch(c[i]){case"string":o=o.toString();break;case"int":o=parseInt(o||0);break;case"float":o=parseFloat(o||0).toFixed(2);break;case"datetime":switch(_.type(o)){case"date":o=_.date.dateFormat("yyyy-MM-dd hh:mm:ss",o);break;case"string":o=o||null}}break;case"function":var f=c[i].call(null,o);if(!1===f||null==f)continue;o=f}a[i]=o}return a},sliceArrayData:function(t,e){var n=[],r=[];if(t.length<e+1)return[t];for(;0<t.length;)r.length==e&&(n.push(r),r=[]),r.push(t.shift()),0==t.length&&n.push(r);return n},splitArrayData:function(t,e){for(var n=t.length,r=Math.ceil(n/e),i=[],o=0;o<r;o++)i[o]=t.slice(o*e,Math.min((o+1)*e,n));return i},resolveValue:function(){var t=arguments;if(t.length)for(var e=0,n=t.length;e<n;e++)if(null!=t[e])return t[e]},resolveObjectValue:function(t,e){if(t&&e&&e.length)for(var n=0,r=e.length;n<r;n++)if(null!=t[e[n]])return t[e[n]]},parseInt:function(t){"string"==typeof t&&(t=+t);t=parseInt(t);return t=isNaN(t)?0:t},parseFloat:function(t){"string"==typeof t&&(t=+t);t=parseFloat(t);return t=isNaN(t)?0:t},isNull:function(t){return null==t},isNotNull:function(t){return null!=t},idle:function(){},idleArray:function(){return[]},idleObject:function(){return{}},format:function(){var t=arguments,n=null;return t.length<2?t[0]:(n=(n=t[0]).toString?n.toString():n,s.each(t[1],function(t,e){null!=t&&(t=s.is(t,"object")?JSON.stringify(t):t.toString?t.toString():t,n=decodeURIComponent(n.replace(new RegExp("\\{"+e+"\\}","gi"),encodeURIComponent(t))))}),n)},uuid:function(t){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)});return e=t&&t.ifUpperCase?e.toUpperCase():e},fix:function(t){for(var e=t||{},n=1,r=arguments.length;n<r;n++){var i,o=arguments[n];for(i in o)o.hasOwnProperty(i)&&"function"!=typeof e[i]&&(e[i]=o[i])}return e},extend:function(t){for(var e=t||{},n=1,r=arguments.length;n<r;n++){var i,o=arguments[n];for(i in o)o.hasOwnProperty(i)&&(e[i]=o[i])}return e},isJson:function(t){return"object"==typeof t&&"[object object]"==a.call(t).toLowerCase()&&0==t.constructor.toString().indexOf("function Object() {")},deepAssign:function(t,e){var n,r=null;switch(a.call(e)){case"[object Object]":if(!o.isJson(e))return t;for(var i in e)if(n=t[i],r=e[i],e.hasOwnProperty(i))switch(a.call(r)){case"[object Object]":o.isJson(r)&&(r=this.deepAssign({},r),"[object Object]"==a.call(n)?t[i]=o.deepAssign(n,r):t[i]=r);break;case"[object Array]":"[object Array]"==a.call(n)?t[i]=t[i].concat(r):t[i]=r;break;case"[object Null]":case"[object Boolean]":case"[object Function]":case"[object Number]":case"[object String]":t[i]=r}break;case"[object Array]":e.unshift(t),o.deepAssigns.apply(o.deepAssigns,e)}return t},callOnce:function(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}},deepAssigns:function(){for(var t=arguments[0],e=1,n=arguments.length;e<n;e++)o.deepAssign(t,arguments[e]);return t},convertArrayArgv:function(t,e){for(var n=[],r=_.extend({prefix:"--"},e).prefix,i={},o=null,a={},c=!1,s=0,u=t.length;s<u;s++)if(-1!==(o=t[s]).indexOf(r))i[f=o.replace(r,"")]=!0,a[s+1]=f,c=c||!0;else if(c)if(a[s])i[a[s]]=o;else{for(var f,l=s-1;!a[l]&&0<l;)l-=1;a[l]&&(null!=(f=i[a[l]])?"string"==typeof f?i[a[l]]=[f,o]:"object"==typeof f&&i[a[l]].push(o):i[a[l]]=o)}else n.push(o);return{env:n,argv:i}},overwrite:function(t){for(var e=t||{},n=1,r=arguments.length;n<r;n++){var i,o=arguments[n];for(i in o)o.hasOwnProperty(i)&&void 0===e[i]&&(e[i]=o[i])}return e},path:function(t,e,n){var r=t||{};if(e){var i,o=e.split("."),a=o.length,c=0;if(arguments.length<3)for(;r&&c<a;c++)i=o[c],r.__get__?r.__get__(i)?r=r.__get__(i):r[i]&&(r=r[i]):r=r[i];else{for(--a;r&&c<a;c++)i=o[c],r=r.__get__?r.__get__(i):r[i]=r[i]||{};i=o[c],r&&(r.__set__?r.__set__(i,n):r[i]=n,r=n)}}return r},invoke:function(t,e,n){var r,i,o;t&&e&&(0<(r=e.lastIndexOf("."))?(i=_.path(t,e.substring(0,r)))&&(o=i[e.substring(r+1)]):o=(i=t)[e],o)&&o.apply(i,n)},deepEachObject:function(t,e,n){if(s.is(t,"object")){var r,i;for(i in t)r=t[i],s.is(r,"object")?this.deepEachObject(r,e,n):null!=(r=e&&e.call(n,r,i,t))&&(t[i]=r)}return t},arrayValueToObject:function(t,e,n){if(s.is(t,"array")){for(var r,i,o={},a=0,c=t.length;a<c;a++)r=t[a],null!=(i=e&&e.call(n,r,a,t,o))&&(o[r]=i);t=o}return t}},s={toString:function(t){return t&&t.toString?t.toString():a.call(t)},each:function(t,e,n){if(t&&e)if(t.__each__)t.__each__(e,n);else{var r=t.length;if(0<r&&"[object Array]"===a.call(t)){for(var i=0;i<r;i++)if(!1===e.call(n,t[i],i))return!1}else for(var o in t)if(t.hasOwnProperty(o)&&!1===e.call(n,t[o],o))return!1}},clone:function(t){if(t){if(t.__clone__)return t.__clone__();if(_.is(t,"array"))return t.slice(0);var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}return t},type:function(t){return t&&t.__type__?t.__type__:a.call(t).slice(8,-1).toLowerCase()},is:function(t,e){if(t&&t.__is__)return t.__is__(e);if("string"==typeof e)switch(e.toLowerCase()){case"plain":return t&&t.constructor===Object;case"function":return t&&("Function"==t.constructor.name||"AsyncFunction"==t.constructor.name);case"asyncfunction":return t&&"AsyncFunction"==t.constructor.name;default:return this.type(t)===e}else if("function"==typeof e)return t instanceof e},may:function(t,e){return!!t&&(t.__may__?t.__may__(e):t.hasOwnProperty("on"+e))},can:function(t,e){return!!t&&(t.__can__?t.__can__(e):"function"==typeof t[e])},has:function(t,e){return!!t&&(t.__has__?t.__has__(e):t.hasOwnProperty(e))},get:function(t,e){if(t)return t.__get__?t.__get__(e):t[e]},set:function(t,e,n){t&&(t.__set__?t.__set__(e,n):t[e]=n)},gets:function(t){if(t){if(t.__gets__)return t.__gets__();var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}},sets:function(t,e){if(t&&e)if(t.__sets__)t.__sets__(e);else for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}};o.extend(_,o),o.extend(_,s)})(zn);