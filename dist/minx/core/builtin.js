!function(p){var a=Object.prototype.toString,i={isNull:function(n){return null==n},isNotNull:function(n){return null!=n},idle:function(){},idleArray:function(){return[]},idleObject:function(){return{}},format:function(){var n,t=arguments,e=null;return t.length<2?t[0]:(e=(e=t[0]).toString?e.toString():e,n=t[1],_.each(n,function(n,t){null!=n&&(n=_.is(n,"object")?JSON.stringify(n):n.toString?n.toString():n,e=e.replace(new RegExp("\\{"+t+"\\}","gi"),n))}),e)},uuid:function(n){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=16*Math.random()|0;return("x"==n?t:3&t|8).toString(16)});return n&&n.ifUpperCase&&(t=t.toUpperCase()),t},fix:function(n){for(var t=n||{},e=1,r=arguments.length;e<r;e++){var o=arguments[e];for(var i in o)o.hasOwnProperty(i)&&"function"!=typeof t[i]&&(t[i]=o[i])}return t},extend:function(n){for(var t=n||{},e=1,r=arguments.length;e<r;e++){var o=arguments[e];for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i])}return t},isJson:function(n){return"object"==typeof n&&"[object object]"==a.call(n).toLowerCase()&&0==n.constructor.toString().indexOf("function Object() {")},deepAssign:function(n,t){var e,r=null;switch(a.call(t)){case"[object Object]":if(!i.isJson(t))return n;for(var o in t)if(e=n[o],r=t[o],t.hasOwnProperty(o))switch(a.call(r)){case"[object Object]":if(!i.isJson(r))continue;r=this.deepAssign({},r),"[object Object]"==a.call(e)?n[o]=i.deepAssign(e,r):n[o]=r;break;case"[object Array]":"[object Array]"==a.call(e)?n[o]=n[o].concat(r):n[o]=r;break;case"[object Null]":case"[object Boolean]":case"[object Function]":case"[object Number]":case"[object String]":n[o]=r}break;case"[object Array]":t.unshift(n),i.deepAssigns.apply(i.deepAssigns,t)}return n},callOnce:function(n){var t=!1;return function(){t||(t=!0,n.apply(this,arguments))}},deepAssigns:function(){for(var n=arguments[0],t=1,e=arguments.length;t<e;t++)i.deepAssign(n,arguments[t]);return n},convertArrayArgv:function(n,t){for(var e,r=[],o=p.extend({prefix:"--"},t).prefix,i={},c=null,a={},_=!1,s=0,u=n.length;s<u;s++)if(-1!==(c=n[s]).indexOf(o))i[e=c.replace(o,"")]=!0,a[s+1]=e,_=_||!0;else if(_)if(a[s])i[a[s]]=c;else{for(var f,l=s-1;!a[l]&&0<l;)--l;a[l]&&(null!=(f=i[a[l]])?"string"==typeof f?i[a[l]]=[f,c]:"object"==typeof f&&i[a[l]].push(c):i[a[l]]=c)}else r.push(c);return{env:r,argv:i}},overwrite:function(n){for(var t=n||{},e=1,r=arguments.length;e<r;e++){var o=arguments[e];for(var i in o)o.hasOwnProperty(i)&&void 0===t[i]&&(t[i]=o[i])}return t},path:function(n,t,e){var r=n||{};if(t){var o,i=t.split("."),c=i.length,a=0;if(arguments.length<3)for(;r&&a<c;a++)o=i[a],r.__get__?r.__get__(o)?r=r.__get__(o):r[o]&&(r=r[o]):r=r[o];else{for(--c;r&&a<c;a++)o=i[a],r=r.__get__?r.__get__(o):r[o]=r[o]||{};o=i[a],r&&(r.__set__?r.__set__(o,e):r[o]=e,r=e)}}return r},invoke:function(n,t,e){var r,o,i;n&&t&&(0<(r=t.lastIndexOf("."))?(o=p.path(n,t.substring(0,r)))&&(i=o[t.substring(r+1)]):i=(o=n)[t],i&&i.apply(o,e))},deepEachObject:function(n,t,e){if(_.is(n,"object")){var r,o;for(var i in n)r=n[i],_.is(r,"object")?this.deepEachObject(r,t,e):null!=(o=t&&t.call(e,r,i,n))&&(n[i]=o)}return n},arrayValueToObject:function(n,t,e){if(_.is(n,"array")){for(var r,o,i={},c=0,a=n.length;c<a;c++)r=n[c],null!=(o=t&&t.call(e,r,c,n,i))&&(i[r]=o);n=i}return n}},_={toString:function(n){return n&&n.toString?n.toString():a.call(n)},each:function(n,t,e){if(n&&t)if(n.__each__)n.__each__(t,e);else{var r=n.length,o=null;if(0<r&&"[object Array]"===a.call(n)){for(var i=0;i<r;i++)if(!1===(o=t.call(e,n[i],i)))return!1}else for(var c in n)if(n.hasOwnProperty(c)){if(!1===(o=t.call(e,n[c],c)))return!1;if(-1===o)continue}}},clone:function(n){if(n){if(n.__clone__)return n.__clone__();if(p.is(n,"array"))return n.slice(0);var t={};for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}return n},type:function(n){return n&&n.__type__?n.__type__:a.call(n).slice(8,-1).toLowerCase()},is:function(n,t){if(n&&n.__is__)return n.__is__(t);if("string"==typeof t)switch(t.toLowerCase()){case"plain":return n&&n.constructor===Object;case"function":return n&&("Function"==n.constructor.name||"AsyncFunction"==n.constructor.name);case"asyncfunction":return n&&"AsyncFunction"==n.constructor.name;default:return this.type(n)===t}else if("function"==typeof t)return n instanceof t},may:function(n,t){return!!n&&(n.__may__?n.__may__(t):n.hasOwnProperty("on"+t))},can:function(n,t){return!!n&&(n.__can__?n.__can__(t):"function"==typeof n[t])},has:function(n,t){return!!n&&(n.__has__?n.__has__(t):n.hasOwnProperty(t))},get:function(n,t){if(n)return n.__get__?n.__get__(t):n[t]},set:function(n,t,e){n&&(n.__set__?n.__set__(t,e):n[t]=e)},gets:function(n){if(n){if(n.__gets__)return n.__gets__();var t={};for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}},sets:function(n,t){if(n&&t)if(n.__sets__)n.__sets__(t);else for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e])}};i.extend(p,i),i.extend(p,_)}(zn);